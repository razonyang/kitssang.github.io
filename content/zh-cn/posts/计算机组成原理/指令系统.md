+++

title = "指令系统"
date = "2021-05-16"
description = "指令系统"
featured = false
categories = [
  "计算机组成原理"
]
tags = [
  "计算机组成原理"
]

series = [
  "计算机组成原理"
]

images = [ "https://coder-adam.oss-cn-hangzhou.aliyuncs.com/img/20210509112157.png"
]

+++

<!--more-->

指令： 计算机实现某个基本操作的命令

指令系统： 一台计算机的所有指令的集合

![](https://coder-adam.oss-cn-hangzhou.aliyuncs.com/img/20210509112157.png)

设计原则：

+ 完备性

+ 有限性

+ 规整性

+ 兼容性

  向上（下）兼容

  向前（后）兼容

一个较完善的指令系统应该包括：

+ 数据传送指令
+ 输入输出指令
+ 算术运算指令
+ 逻辑运算指令
+ 系统控制指令
+ 程序控制指令

指令系统的设计大体上只有两种：

+ 复杂指令集计算机 CISC   出现较早，大而全

  1. 指令系统复杂
  2. 指令周期长
  3. 各种指令都能访问存储器
  4. 有专用的寄存器
  5. 采用微程序控制
  6. 难以进行编译优化生成高效目标代码

  **存在的问题**：

  1. 研制周期长
  2. 难以保证设计的正确性
  3. 机器的时钟周期长，降低了系统的性能
  4. 效率低下

  

+ 精简指令集计算机 RISC   小而精

  1. 简化的指令系统
  2. 以寄存器-寄存器方式工作
  3. 指令周期短
  4. 采用大量通用寄存器，以减少访问次数
  5. 采用组合逻辑电路控制，不用或者少用微程序控制
  6. 采用优化的编译系统，力求有效的支持高级语言程序

  

现代处理器大多采用**RISC**体系结构，CISC和RISC正逐步融合



# 指令格式

指令的含义决定了指令的格式和指令的长度：操作码+地址码

**指令长度**：

+ 一条指令包含的二进制代码位数
+ 取决于操作码长度、操作码地址长度和地址个数
  + 定长指令字：所有的指令的长度相同，向最长指令看齐
  + 变长指令字：不同指令的长度不同

操作码：

+ 每条指令的操作码只能有一个
+ 用一定长度的不同编码表示不同的操作

地址码：

+ 每条指令的地址码可以有多个

**地址码的个数与性能和实现难度密切相关**



# 操作码

操作码的编码方式决定操作码的长度

+ 定长操作码法
+ 变长、扩展操作码法

操作码长度是否可变和指令长度是否可变没有绝对联系

+ 关注程序代码长度时：变长指令字、变长操作码

+ 关注性能的时候：定长指令字、定长操作码

定长操作码：

​	基本思想：指令的操作码部分采用固定长度的编码

​	特点：译码简单，但有信息的冗余

扩展操作码：

​	基本思想： 指令的操作码部分采用可变长度的编码

​	操作码的编码长度分成几种固定长的格式，操作码的位数随地址数的减少而增加，被大多数指令集采用

​	优点： 

1. 缩短指令的长度

2. 减少程序的总位数

3. 增加指令字所能表示的操作信息

   

一个重要原则： 

+ 使用频度高的指令使用短的操作码
+ 使用拼读低的指令使用长的操作码

# 地址码

地址的选择依赖于指令系统的结构

+ 堆栈结构：零地址指令
+ 累加器结构：一地址指令
+ 通用寄存器结构：二三地址指令

零地址指令： 

+ 无需操作数 如：停机/空操作
+ 所需要的操作数为默认的 如：堆栈等

一地址指令：其地址既是源操作数的地址，也是存放结果的地址

+ 单目运算： 如：取反/取负
+ 双目运算： 另一操作数为默认的 如：累加器等

二地址指令： 分别存放双目运算中两个源操作数地址，并将其中一个地址作为存放结果的地址

三地址指令（RISC）： 分别为双目运算中的两个源操作数地址和存放结果的地址



# 寻址方式

寻址方式：就是如何找到操作数存放位置的方法

![](https://coder-adam.oss-cn-hangzhou.aliyuncs.com/img/20210509161148.png)

寻址方式出现的目的：

+ 扩大访存范围
+ 提高访问数据的灵活性和有效性
+ 支持软件技术的发展：多道程序设计

![](https://coder-adam.oss-cn-hangzhou.aliyuncs.com/img/20210509161545.png)

## 基本寻址方式

1. 立即数寻址

   ![](https://coder-adam.oss-cn-hangzhou.aliyuncs.com/img/image-20210509161755175.png)

2. 存储器直接寻址

   ![](https://coder-adam.oss-cn-hangzhou.aliyuncs.com/img/image-20210509161951343.png)

3. 寄存器直接寻址

   ![](https://coder-adam.oss-cn-hangzhou.aliyuncs.com/img/20210509162046.png)

4. 存储器间接寻址

   ![](https://coder-adam.oss-cn-hangzhou.aliyuncs.com/img/image-20210509162139526.png)

5. 寄存器间接寻址

   ![](https://coder-adam.oss-cn-hangzhou.aliyuncs.com/img/20210509162348.png)

6. 偏移寻址

   ![](https://coder-adam.oss-cn-hangzhou.aliyuncs.com/img/20210509162515.png)

   ![](https://coder-adam.oss-cn-hangzhou.aliyuncs.com/img/20210509162604.png)

7. 堆栈寻址

   ![](https://coder-adam.oss-cn-hangzhou.aliyuncs.com/img/image-20210509162825482.png)

小结：

![](https://coder-adam.oss-cn-hangzhou.aliyuncs.com/img/20210509163157.png)



寻址方式的确定：

1. 在操作码中给定寻址方式
2. 专门的寻址方式位



复合寻址：

​			![](https://coder-adam.oss-cn-hangzhou.aliyuncs.com/img/20210509163428.png)

![](https://coder-adam.oss-cn-hangzhou.aliyuncs.com/img/20210509163842.png)

